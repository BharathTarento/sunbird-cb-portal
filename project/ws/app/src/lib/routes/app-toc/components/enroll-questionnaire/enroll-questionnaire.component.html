<div #fullScreenContainer>
    <div class="dialog-header text-right mb-2">
        <!-- <h1 class="mr-2" mat-dialog-title>{{data.title}}</h1> -->
        <mat-icon class="mat-icon notranslate material-icons close-icon cursor-pointer" matprefix="" role="img" aria-hidden="true" [mat-dialog-close]="false">close</mat-icon>
    </div>
    <div *ngIf="customForm">
      <h1> {{data?.courseName}} </h1>
      <div class="w-full">
       <form [formGroup]="userDetailsForm">
           <div class="w-full">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Group
               </div>
               <mat-form-field appearance="outline" class="w-full">
                   <mat-select formControlName="group">
                       <mat-option *ngFor="let group of groupData" value="{{group}}">{{ group }}</mat-option>
                   </mat-select>
               </mat-form-field>
           </div>
           <div class="w-full">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Designation
               </div>
               <mat-form-field appearance="outline" class="w-full">
                   <mat-select formControlName="designation">
                       <mat-option *ngFor="let designation of designationsMeta"
                         value="{{ designation?.name }}">{{ designation?.name }}</mat-option>
                     </mat-select>
               </mat-form-field>
           </div>
           <div class="w-full">
               <div class="mat-subheading-2 margin-0 required"
                   i18n="Title label|Label which explains the user to enter title">
                   Employee ID
               </div>
               <mat-form-field appearance="outline" class="w-full">
                   <input type="text" class="input-text" matInput formControlName="employeeCode" />
                   <mat-error class="text-xs" *ngIf="userDetailsForm.get('employeeCode').hasError('pattern')">
                       Please enter an Alpha-numeric value only
                   </mat-error>
               </mat-form-field>                    
           </div>
           <div class="w-full">
            <div class="mat-subheading-2 margin-0 required"
                i18n="Title label|Label which explains the user to enter title">
                Mobile Number
            </div>
            <div class="flex flex-row gap-4">
              <div class="country-code" appearance="outline">
                +91
              </div>
              <div class="flex-1">
                <div class="flex flex-col">
                  <mat-form-field appearance="outline" class="profile-form-field mobile-num">
                    <input type="text" class="input-text mobile-text relative" maxlength="10" (keyup)="handleEmpty('mobile')"
                      matInput formControlName="mobile" />
                      <mat-icon class="verified-check" *ngIf="mVerified">check_circle</mat-icon>
                  </mat-form-field>
                  <mat-error class="text-xs"
                      *ngIf="userDetailsForm.get('mobile').hasError('required') || userDetailsForm.get('mobile').hasError('pattern')">
                        {{ 'profileInfo.pleaseEnterValidMobileNumber' | translate }}
                    </mat-error>
                </div>
                <div class="flex justify-end" *ngIf="verifyMobile && !otpSent && !mVerified">
                  <span class="get-otp sm:mr-4" (click)="handleGenerateOTP('phone')">{{ 'profileInfo.getOTP' |
                    translate }}</span>
                </div>
              </div>
            </div>
            <div *ngIf="otpSent">             
              <form [formGroup]="otpForm">
                <div class="w-full">
                  <div class="flex enter-otp">
                    <div class="mat-subheading-2 required"
                      i18n="Title label|Label which explains the user to enter title">
                      Enter OTP
                    </div>
                    <div class="mb-3">Time Remaining: <span #timerDiv></span></div>
                  </div>
                  <mat-form-field appearance="outline" class="profile-form-field mobile-num">
                    <input type="text" matInput formControlName="otp" class="input-text custom-size" placeholder="{{ 'profileInfo.enterTheOTP' | translate }}" maxlength="6" />
                  </mat-form-field>
                </div>
                <div class="w-full">
                  <div class="flex justify-center" *ngIf="showResendOTP">  
                    <div class="flex flex-row">
                        <div class="timer">{{ 'profileInfo.didNotReceiveOTP' | translate }}</div>
                        <div class="resend-otp" (click)="handleResendOTP()">&nbsp;&nbsp;{{ 'profileInfo.resentOTP' | translate }}</div>
                    </div>
                  </div>
                </div>
                <div class="w-full mb-4">
                  <div class="flex flex-row justify-between">
                    <!-- <button class="outline-button" (click)="handleCloseModal()">{{ 'profileInfo.cancel' | translate }}</button> -->
                    <button class="save-button" (click)="verifyMobileOTP()">{{ 'profileInfo.submit' | translate }}</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
           <div class="w-full">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Gender
               </div>
               <mat-form-field appearance="outline" class="w-full">
                   <mat-select formControlName="gender">
                       <mat-option *ngFor="let gender of eUserGender" value="{{ gender }}">{{
                         handleTranslateTo(gender.toLowerCase()) }}</mat-option>
                   </mat-select>
               </mat-form-field>
           </div>
           <div class="w-full">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Date of Birth
               </div>
               <mat-form-field appearance="outline" class="w-full">
                   <input matInput class="input-text icon-include-input" [max]="currentDate" [matDatepicker]="picker" readonly
                 formControlName="dob" />
                   <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                   <mat-datepicker #picker></mat-datepicker>
               </mat-form-field>
           </div>
           <div class="w-full">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Mother Tongue
               </div>
               <mat-form-field appearance="outline" class="w-full">
                   <div class="flex flex-row auto-complete-row">
                     <input type="text" class="input-text" aria-label="Domicile Medium (Mother Tongue)" matInput 
                       formControlName="domicileMedium" [matAutocomplete]="languageAuto" />
                     <mat-icon>arrow_drop_down</mat-icon>
                   </div>
                   <mat-autocomplete #languageAuto="matAutocomplete">
                     <mat-option *ngFor="let language of masterLanguages" [value]="language.name">
                       {{ language.name }}
                     </mat-option>
                   </mat-autocomplete>
               </mat-form-field>
           </div>
           <div class="w-full">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 category
               </div>
               <mat-form-field appearance="outline" class="w-full">
                   <mat-select formControlName="category">
                     <mat-option *ngFor="let category of eCategory" value="{{ category }}">{{
                       handleTranslateTo(category?.toLowerCase()) }}</mat-option>
                   </mat-select>
               </mat-form-field>
           </div>
           <div class="w-full">
               <div class="mat-subheading-2 margin-0 required"
                   i18n="Title label|Label which explains the user to enter title">
                   Office Pin Code
               </div>
               <mat-form-field appearance="outline" class="w-full">
                   <input type="email" class="input-text" matInput maxlength="6" formControlName="pincode" />
                   <mat-error class="text-xs" *ngIf="userDetailsForm.get('pincode').hasError('pattern')">
                       {{ 'profileInfo.invalidPinCode' | translate }}
                       </mat-error>
               </mat-form-field>                    
           </div>
           <div class="w-full">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Are you a Cadre Employee?
               </div>
               <mat-form-field appearance="outline" class="profile-form-field">
                   <mat-select formControlName="isCadre" (selectionChange)="getIsCadreStatus($event.value)">
                     <mat-option [value]="true">Yes</mat-option>
                     <mat-option [value]="false">No</mat-option>
                   </mat-select>
               </mat-form-field>
           </div>

           <div class="w-full" *ngIf="isCadreStatus">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Type of Civil Service
               </div>
               <mat-form-field appearance="outline" class="profile-form-field">
                   <mat-select formControlName="typeOfCivilService" (selectionChange)="getService($event.value)">
                     <mat-option *ngFor="let service of civilServiceTypes" [value]="service">{{ service }}</mat-option>
                   </mat-select>
               </mat-form-field>
           </div>

           <div class="w-full" *ngIf="userDetailsForm.get('typeOfCivilService').value && userDetailsForm.get('isCadre').value">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Service
               </div>
               <mat-form-field appearance="outline" class="profile-form-field">
                   <mat-select formControlName="serviceType" (selectionChange)="onServiceSelect($event)">
                       <mat-option *ngFor="let service of serviceName" [value]="service">{{ service }}</mat-option>
                   </mat-select>
               </mat-form-field>
           </div>

           <div class="w-full" *ngIf="userDetailsForm.get('serviceType').value && 
               userDetailsForm.get('isCadre').value 
               && userDetailsForm.get('typeOfCivilService').value && (
                   userDetailsForm.get('serviceType').value === 'Indian Administrative Service (IAS)' || 
                   userDetailsForm.get('serviceType').value === 'Indian Police Service (IPS)' || 
                   userDetailsForm.get('serviceType').value === 'Indian Forest Service (IFoS)' 
                 )">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Cadre
               </div>
               <mat-form-field appearance="outline" class="profile-form-field">
                   <mat-select formControlName="cadre" (selectionChange)="onCadreSelect($event.value)">
                       <mat-option *ngFor="let state of cadre" [value]="state">{{ state }}</mat-option>
                     </mat-select>
                 </mat-form-field>
           </div>

           <div class="w-full" *ngIf="(userDetailsForm.get('serviceType').value && 
           userDetailsForm.get('isCadre').value && userDetailsForm.get('typeOfCivilService').value && (
               userDetailsForm.get('serviceType').value === 'Indian Administrative Service (IAS)' || 
               userDetailsForm.get('serviceType').value === 'Indian Police Service (IPS)' || 
               userDetailsForm.get('serviceType').value === 'Indian Forest Service (IFoS)' 
           ) && userDetailsForm.get('cadre').value)  ? true : ((userDetailsForm.get('serviceType').value && 
               userDetailsForm.get('isCadre').value 
           && userDetailsForm.get('typeOfCivilService').value && (
               userDetailsForm.get('serviceType').value !== 'Indian Administrative Service (IAS)' && 
               userDetailsForm.get('serviceType').value !== 'Indian Police Service (IPS)' && 
               userDetailsForm.get('serviceType').value !== 'Indian Forest Service (IFoS)' 
           ))) ? true : false">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Batch
               </div>
               <mat-form-field appearance="outline" class="profile-form-field">
                   <mat-select formControlName="batch">
                       <mat-option *ngFor="let year of yearArray" [value]="year">{{ year }}</mat-option>
                   </mat-select>
                 </mat-form-field>
           </div>
           <div class="w-full" *ngIf="userDetailsForm.get('isCadre').value &&  userDetailsForm.get('batch').value">
               <div class="mat-subheading-2 margin-0 required"
                 i18n="Title label|Label which explains the user to enter title">
                 Cadre Controlling Authority
               </div>
               <span class="cadreControl-name">{{cadreControllingAuthority}}</span>
           </div>
           <div class="w-full flex flex-row gap-4 justify-end margin-top-m">
               <button class="save-button" [disabled]="userDetailsForm?.invalid ">{{ 'profileInfo.saveChanges' | translate }}</button>
           </div>
       </form>
      </div>
   </div>
   <div *ngIf ="!customForm">
       <lib-micro-survey class="course-survey"
           [apiData]="data?.apiData"
           [afterSubmitAction]="afterSubmitAction"
           [isReadOnly]="isReadOnly"
           [surveyId]="data?.surveyId"
           [courseId]="data?.courseId"
           [courseName]="data?.courseName"
           [isblendedprogram]="true"
           [customTextAreaRows]="1"
           >
       </lib-micro-survey>
   </div>
</div>
