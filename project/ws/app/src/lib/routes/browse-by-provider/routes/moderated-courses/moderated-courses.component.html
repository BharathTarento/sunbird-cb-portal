<ws-widget-btn-page-back [widgetData]="{ url: 'home', titles: titles  }">
</ws-widget-btn-page-back>
<div class="container-balanced main_content_box">
    <div class="all_moderated_box">  
        <div class="all_competency_inner">
            <div class="left_card_box">
                <form [formGroup]="searchForm">
                    <div class="flex top_search_box">
                        <div class="flex-1 search_box_inner">
                          <div class="flex flex-1 flex-column margin-fix search search_box_main">

                            <mat-form-field appearance="outline" class="autocomplete-form search_form margin-right-s"
                            color="primary">
                            <mat-icon matPrefix class="search-home flex items-center justify-center mr-2">search
                            </mat-icon>
                            <input type="search" name="searchKey" #searchKey class="ml-2" i18-aria-label aria-label="Search"
                            formControlName="searchKey" i18n-placeholder="search" [placeholder]="'Search'" matInput />
                            </mat-form-field>

                            </div>
                            <div class="search_tag_box">
                                <ng-container *ngFor="let f of appliedFilters">
                                  <a class="single_tag">{{f.name}}
                                    <mat-icon class="cursor-pointer margin-left-xs ws-mat-black60-text" (click)="removeFilter(f)">
                                      close
                                    </mat-icon>
                                  </a>
                                </ng-container>
                            </div>
                        </div>
                        <div class="item_dropdown_box">
                            <div class="flex flex-1 flex-wrap section-input">
                              <div class="item">
                                <mat-form-field class="" appearance="outline">
                                  <mat-select #sortBySelect formControlName="sortByControl" i18n-placeholder placeholder="Sort by">
                                    <mat-option [value]="'Ascending'" slected>Ascending ( A - Z )</mat-option>
                                    <mat-option [value]="'Descending'">Descending ( Z - A )</mat-option>
                                  </mat-select>
                                </mat-form-field>
                              </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <h2 class="mat-h1 margin-remove inline-block "> Moderated Courses </h2>
    </div>
    <mat-sidenav-container autosize class="container-balanced" [hasBackdrop]="false">
        <!-- Cards display-->
        <mat-sidenav-content class="custom-sidecontent">
            <!-- <div class="flex justify-end">
                <button type="button" mat-icon-button (click)="sideNavBarOpened = !sideNavBarOpened"
                    id="ws-auth-root-home-btn-menu" name="ws-auth-root-home-btn-menu">
                    <mat-icon>menu</mat-icon>
                </button>
            </div> -->
            <div *ngIf="totalResults > 0 && searchResults && searchResults.length > 0" infinite-scroll
                [infiniteScrollDistance]="scrollDistance" [infiniteScrollThrottle]="throttle"
                (scrolled)="onScrollEnd()">
                <mat-card class="learn-card margin-bottom-m padding-remove position-relative"
                *ngFor="let content of searchResults">
                    <div *ngIf="content?.posterImage" class="imageholder float-left">
                        <img mat-card-image class="margin-remove" [src]="content?.posterImage | pipePublicURL" alt="" />
                    </div>
                    <div *ngIf="!content?.posterImage" class="imageholder float-left">
                        <ng-container  *ngIf="content?.appIcon; else defaultImg" class="imageholder float-left">
                          <img mat-card-image class="margin-remove" [src]="content?.appIcon | pipePublicURL" alt="" />
                      </ng-container>
                        <ng-template #defaultImg>
                          <img mat-card-image class="margin-remove" src="/assets/instances/eagle/app_logos/default.png" alt="" />
                        </ng-template>
                      </div>

                      <mat-card-content>
                        <p class="mat-caption ws-mat-black60-text margin-bottom-xxs text-uppercase"
                        *ngIf="content.contentType === 'Resource' || content.contentType === 'Course' || content.contentType === 'Module'">
    
                        <mat-icon
                            class="mat-icon ws-mat-default-text margin-right-xs notranslate material-icons mat-icon-no-color"
                            *ngIf="content.mimeType === 'audio/mpeg'">mic</mat-icon>
    
                        <mat-icon
                            class="mat-icon ws-mat-default-text margin-right-xs notranslate material-icons mat-icon-no-color"
                            *ngIf="content.mimeType === 'application/json' || content.mimeType === 'application/quiz'">
                            assessment</mat-icon>
    
                        <mat-icon
                            class="mat-icon ws-mat-default-text margin-right-xs notranslate material-icons mat-icon-no-color"
                            *ngIf="content.mimeType === 'application/pdf'">picture_as_pdf</mat-icon>
    
                        <mat-icon
                            class="mat-icon ws-mat-default-text margin-right-xs notranslate material-icons mat-icon-no-color"
                            *ngIf="content.mimeType === 'video/mp4' || content.mimeType === 'video/x-youtube' || content.mimeType === 'application/x-mpegURL'">
                            videocam</mat-icon>
    
                        <mat-icon
                            class="mat-icon ws-mat-default-text margin-right-xs notranslate material-icons mat-icon-no-color"
                            *ngIf="content.mimeType === 'application/vnd.ekstep.content-collection'">video_library
                        </mat-icon>
    
                        <mat-icon
                            class="mat-icon ws-mat-default-text margin-right-xs notranslate material-icons mat-icon-no-color"
                            *ngIf="content.mimeType === 'application/vnd.ekstep.html-archive' || content.mimeType === 'application/vnd.ekstep.ecml-archive' || content.mimeType === 'text/x-url'">
                            attachment</mat-icon>
    
                        <mat-icon
                            class="mat-icon ws-mat-default-text margin-right-xs notranslate material-icons mat-icon-no-color"
                            *ngIf="content.mimeType === 'image/jpeg' || content.mimeType === 'image/png'">image
                        </mat-icon>
                        MODERATED COURSES
                    </p>

                    <p class="mat-subheading-1 margin-bottom-xs font-bold-imp cursor-pointer content-title">
                        <a [routerLink]="['/app/toc/',content.identifier,'overview']"
                            [queryParams]="{primaryCategory: content.primaryCategory}"
                            [state]="statedata">{{content.name}}</a>
                    </p>

                    <div class="bottomsection">
                        <p class="mat-body-2 margin-bottom-xxs" *ngIf="content.creator">By {{content.creator}}</p>
                        <div class="contentdata margin-bottom-xm">
                            <ul
                                class="mat-body-2 margin-remove-top margin-bottom-xs padding-remove ws-mat-black60-text">
                                <!-- <li>Health social science</li> -->
                                <li *ngIf="content.lastUpdatedOn">
                                    <!-- <img src="/assets/icons/content/separator.svg">   -->
                                    {{ content.lastUpdatedOn | date: "MMM yyyy" }}
                                </li>
                                <li *ngIf="content.duration">
                                    <img src="/assets/icons/content/separator.svg"> {{ content.duration |
                                    pipeDurationTransform: 'hms' }}
                                </li>
                                <!-- <li><img src="/assets/icons/content/separator.svg">  Ratings</li> -->
                            </ul>
                        </div>
                        <div class="tags" *ngIf="content.keywords && content.keywords.length > 0">
                            <ul
                                class="mat-caption margin-remove-top margin-bottom-s padding-remove display-inline-block">
                                <li *ngFor="let tag of content.keywords">{{tag}}</li>
                            </ul>
                            <!-- <p class="display-inline-block ws-mat-black60-text actionbtns">
                                <mat-icon class="margin-right-s">more_vert_outlined</mat-icon>
                                <mat-icon>playlist_add</mat-icon>
                            </p> -->
                        </div>
                    </div>
                    </mat-card-content>
                </mat-card>             
            </div>

            <div class="margin-xl text-center" *ngIf="totalResults === 0">
                <img src="/assets/common/error-pages/empty_search.svg" wsUtilsImageResponsive alt="No results"
                    class="margin-top-l margin-bottom-s">
                <h2 class="mat-h2" i18n="search route no result">No results found</h2>
                <h3 class="mat-h3" i18n="search route you may try">Try removing the filters or search using different
                    keywords</h3>
            </div>
        </mat-sidenav-content>
        <!--Cards display end-->

        <!--filter sidebar-->
        <mat-sidenav [mode]="'side'" [(opened)]="sideNavBarOpened" position="end" class="custom-sidenav">
            <ng-container>
                <div>
                    <!-- <ws-app-search-filters [urlparamFilters]="paramFilters"
                        [newfacets]="facets"></ws-app-search-filters> -->
                </div>
            </ng-container>
        </mat-sidenav>
        <!--filter sidebar end-->
    </mat-sidenav-container>
</div>