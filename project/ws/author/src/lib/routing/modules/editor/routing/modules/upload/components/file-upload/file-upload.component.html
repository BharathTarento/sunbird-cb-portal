<!-- <div class="margin-top-m margin-left-xl"> -->
<mat-card class="flex flex-1 flex-column">
  <ng-container>
    <div class="flex mt-8 margin-bottom-xl top-heading flex-Update ws-mat-default-text">
      <div class="flex flex-1">
        <h1 class="margin-remove-bottom title"><span >Upload Content </span></h1>
        <ng-container [ngTemplateOutlet]="top"></ng-container>
      </div>
      <div class="margin-top-s new-inner-div mat-app-background">
        <h3 class="ws-mat-default-text text-center">File Type : PDF, MP3, MP4, ZIP (Upto 200 mb)</h3>
        <div class="upload-box flex flex-middle flex-col justify-center cursor-pointer mat-card"
          (click)="fileInput.click()" wsAuthDragDrop (fileDropped)="onDrop($event)">

          <span class="font-weight-500 flex flex-column text-center">
            <input type="file" #fileInput class="inputfile" accept=".mp3,.mp4,.pdf,.zip"
              (change)="onDrop($event.target.files[0]); fileInput.value = null" />

            <label for="file" class="up-lbl mat-h3 ws-mat-primary-text flex flex-middle justify-center">
              <mat-icon class="upload_cloud ws-mat-default-text">file_upload</mat-icon>
              <span >Drop file to Upload</span>
            </label>
            <span class="or">or</span>
            <span class="ws-mat-default-text mat-h3 underline">Browse</span>
          </span>
        </div>
        <div class="instruction">
          <div class="pro-div margin-top-xl">
            <div *ngIf="file || fileUploadForm.controls.artifactUrl.value"
              class="flex flex-middle justify-center flex-column">
              <ng-container [ngSwitch]="mimeType">
                <mat-icon class="ws-mat-primary-text" *ngSwitchCase="'audio/mpeg'">
                  music_note
                </mat-icon>
                <mat-icon class="ws-mat-primary-text" *ngSwitchCase="'application/x-mpegURL'">
                  videocam
                </mat-icon>
                <mat-icon class="ws-mat-primary-text" *ngSwitchCase="'application/pdf'">
                  picture_as_pdf
                </mat-icon>
                <mat-icon class="ws-mat-primary-text" *ngSwitchCase="'application/html'">
                  request_quote
                </mat-icon>
              </ng-container>
              <p class="margin-left-xs mat-h3 font-weight-500 margin-remove-bottom break">
                <ng-container *ngIf="file; else elseBlock">
                  <span class="flex-wrap"> {{ file?.name }}</span>
                </ng-container>
                <ng-template #elseBlock>
                  {{ fileUploadForm.controls.artifactUrl.value.split('/').pop() }}
                  <ng-container> </ng-container>
                </ng-template>
              </p>

              <button *ngIf="file || fileUploadForm.controls.artifactUrl.value" mat-icon-button
                class="close-button padding-remove ws-mat-primary-background-op30 text-white"
                (click)="clearUploadedFile(); $event.stopPropagation()">
                <mat-icon class="rotate">add_circle_outline</mat-icon>
              </button>
              <!-- <mat-progress-bar *ngIf="file" mode="indeterminate"></mat-progress-bar> -->
            </div>
          </div>
          <div class="flex flex-column margin-top-m margin-bottom-xl">
            <!-- {{iprAccepted}}
            ========================
            {{this.fileUploadForm.controls.artifactUrl.value}} -->
            <div class="flex flex-middle margin-top-xs padding-top-l">
              <mat-checkbox [checked]="iprAccepted" (change)="iprChecked()">
              </mat-checkbox>
              <p class="margin-left-xs margin-remove-bottom">
                <span >I have read and I agree with the </span>
                <span class="ws-mat-default-text font-weight-bold cursor-pointer" (click)="showIpr()" >IPR
                  Declaration</span>
              </p>
            </div>
            <!-- <span class="spacer"></span> matStepperNext-->
            <button type="button" mat-raised-button class="ws-mat-primary-background margin-top-xl mw"
              [disabled]="!enableUpload" (click)="triggerUpload()">
              <div class="flex flex-middle justify-center">
                <mat-icon class="text-white">file_upload</mat-icon>
                <p class="text-white margin-left-s margin-remove-bottom">
                  <span >Upload</span>
                </p>
              </div>
            </button>
            <button type="button" mat-raised-button class="ws-mat-primary-background margin-top-xl mw"
              *ngIf="(fileUploadForm.controls.artifactUrl.value)" (click)="data.emit('next')">
              <div class="flex flex-middle justify-center">
                <mat-icon class="text-white">fast_forward</mat-icon>
                <p class="text-white margin-left-s margin-remove-bottom">
                  <span >Skip</span>
                </p>
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</mat-card>
<!-- </div> -->


<ng-template #guideline>
  <div class="margin-top-m margin-bottom-m">
    <div style="position: relative;">
      <h3 class="mat-h3 font-weight-bold margin-remove-bottom" >
        Guidelines for zip file upload
      </h3>
      <button class="close-button primary-button" (click)="closeDialog()">
        <mat-icon aria-label="Next" role="button">close</mat-icon>
      </button>
    </div>
    <div style="overflow: auto; max-height: 450px; flex: 1;">
      <div class="mat-form-field mt-4">
        <div class="flex w-100">
          <mat-checkbox [(ngModel)]="fileUploadCondition.fileName" ></mat-checkbox>
          <div class="margin-left-s" >All the folder and file names should not contains any special character
            including space</div>
        </div>
        <div class="flex relative mat-form-field-appearance-fill mt-4"
          *ngIf="fileUploadCondition.isSubmitPressed && !fileUploadCondition.fileName">
          <div class="mat-form-field-subscript-wrapper mat-error no-padding" >
            Accept the declaration
          </div>
        </div>
      </div>
      <div class="mat-form-field mt-4">
        <div class="flex w-100">
          <mat-checkbox [(ngModel)]="fileUploadCondition.eval" ></mat-checkbox>
          <div class="margin-left-s" >Should not have any code which will cause security vulnerability like usage
            eval function</div>
        </div>
        <div class="flex relative mat-form-field-appearance-fill mt-4"
          *ngIf="fileUploadCondition.isSubmitPressed && !fileUploadCondition.eval">
          <div class="mat-form-field-subscript-wrapper mat-error no-padding" >
            Accept the declaration
          </div>
        </div>
      </div>
      <div class="mat-form-field mt-4">
        <div class="flex w-100">
          <mat-checkbox [(ngModel)]="fileUploadCondition.externalReference" ></mat-checkbox>
          <div class="margin-left-s" >All the dependencies should be included in the zip. Should not refer to
            external
            websites to load any assets like images, css or js</div>
        </div>
        <div class="flex relative mat-form-field-appearance-fill mt-4"
          *ngIf="fileUploadCondition.isSubmitPressed && !fileUploadCondition.externalReference">
          <div class="mat-form-field-subscript-wrapper mat-error no-padding" >
            Accept the declaration
          </div>
        </div>
      </div>
      <div class="mat-form-field mt-4">
        <div class="flex w-100">
          <mat-checkbox [(ngModel)]="fileUploadCondition.iframe" ></mat-checkbox>
          <div class="margin-left-s" >Should not include any iframe. If required contact the Platform Admin.</div>
        </div>
        <div class="flex relative mat-form-field-appearance-fill mt-4"
          *ngIf="fileUploadCondition.isSubmitPressed && !fileUploadCondition.iframe">
          <div class="mat-form-field-subscript-wrapper mat-error no-padding" >
            Accept the declaration
          </div>
        </div>
      </div>
      <div class="mat-form-field mt-4">
        <div class="flex w-100">
          <mat-checkbox [(ngModel)]="fileUploadCondition.preview" ></mat-checkbox>
          <div class="margin-left-s" >After successful upload of zip file ensure everything is working fine by
            previewing the content. If there is any inconsistency check in the developer mode to know the exact
            reason</div>
        </div>
        <div class="flex relative mat-form-field-appearance-fill mt-4"
          *ngIf="fileUploadCondition.isSubmitPressed && !fileUploadCondition.preview">
          <div class="mat-form-field-subscript-wrapper mat-error no-padding" >
            Accept the declaration
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="flex justify-center">
    <button type="button" mat-raised-button class="margin-top-m ws-mat-primary-background" (click)="fileUploadCondition.isSubmitPressed = true;
        fileUploadCondition.fileName &&
        fileUploadCondition.iframe &&
        fileUploadCondition.eval &&
        fileUploadCondition.preview &&
        fileUploadCondition.externalReference ? closeDialog() : null">
      <div class="flex flex-middle justify-center">
        <p class="margin-remove-bottom agree-text" >I Agree</p>
      </div>
    </button>
  </div>
</ng-template>

<ng-template #errorFile>
  <div class="margin-top-m margin-bottom-m">
    <div style="position: relative;">
      <h3 class="mat-h3 font-weight-bold margin-remove-bottom" >
        Following files or folders have special characters in their names
      </h3>
      <button class="close-button primary-button" (click)="closeDialog()">
        <mat-icon aria-label="Next" role="button">close</mat-icon>
      </button>
    </div>
    <div style="overflow: auto; max-height: 400px" class="mat-form-field mt-4" id="errorFiles">
      <div *ngFor="let name of errorFileList">{{name}}</div>
    </div>
  </div>
  <div class="flex justify-center">
    <button type="button" mat-raised-button class="ws-mat-primary-background margin-top-m" (click)="closeDialog()">
      <div class="flex flex-middle justify-center">
        <p class="margin-remove-bottom agree-text" >I Understand</p>
      </div>
    </button>
  </div>
</ng-template>

<ng-template #selectFile>
  <div class="margin-top-m margin-bottom-m">
    <div style="position: relative;">
      <h3 class="mat-h3 font-weight-bold margin-remove-bottom" >
        Select the entry file
      </h3>
      <button class="close-button primary-button" (click)="closeDialog()">
        <mat-icon aria-label="Next" role="button">close</mat-icon>
      </button>
    </div>
    <div style="overflow: auto; max-height: 400px" class="mt-4">
      <mat-radio-group aria-labelledby="example-radio-group-label" class="flex flex-1 flex-column example-radio-group"
        [(ngModel)]="fileUploadCondition.url">
        <mat-radio-button class="example-radio-button" *ngFor="let file of fileList" [value]="file">
          {{file}}
        </mat-radio-button>
      </mat-radio-group>
    </div>
  </div>
  <div class="flex justify-center">
    <button [disabled]="!!!fileUploadCondition.url" type="button" mat-raised-button color="primary"
      class="margin-top-m ws-mat-primary-background" (click)="closeDialog()">
      <div class="flex flex-middle justify-center">
        <p class="margin-remove-bottom agree-text" >Done</p>
      </div>
    </button>
  </div>
</ng-template>

<ng-template #top>
  <ws-auth-options [currentContent]="currentContent" (action)="data.emit($event)"></ws-auth-options>
</ng-template>

<!-- <div *ngIf="previewMode">
  <mat-icon (click)="closePreview()" class="close-preview">
    arrow_back</mat-icon>
  <ws-auth-viewer [identifier]="currentContent" [mimeTypeRoute]="mimeTypeRoute"></ws-auth-viewer>
</div> -->