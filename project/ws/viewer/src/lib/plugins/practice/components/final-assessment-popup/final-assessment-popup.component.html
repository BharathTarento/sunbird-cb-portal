<div class="finalAssessment">
    <button mat-icon-button class="close-button" [mat-dialog-close]="true">
        <mat-icon class="close-icon">close</mat-icon>
    </button>

    <div class="assessment-results">
        <ng-container *ngIf="assessmentData?.headerText">
            <div class="header p-3">{{assessmentData.headerText}}</div>
        </ng-container>

        <div>
            <table
              mat-table
              [dataSource]="dataSource"
              class="w-full">
                <ng-container
                    *ngFor="let disCol of displayedColumns; let colIndex = index">
                    <ng-container matColumnDef="{{ disCol.key }}" >
                        <th mat-header-cell *matHeaderCellDef>
                            {{ disCol.header }}
                        </th>

                        <td
                            mat-cell
                            *matCellDef="let element; let rowIndex = index;"
                        >
                            <span>{{ element[disCol.key] }}</span>
                        </td>
                    </ng-container>
                </ng-container>

                <tr class="mat-row" *matNoDataRow>
                    <span class="mat-cell" colspan="10">No data found</span>
                </tr>
              
                <tr mat-header-row *matHeaderRowDef="getFinalColumns"></tr>
              
                <tr mat-row *matRowDef="let row; columns: getFinalColumns"></tr>
            </table>
        </div>

        <ng-container *ngIf="assessmentData?.warningNote">
            <div class="flex warning mt-5 mb-4">
                <div>
                    <mat-icon>warning</mat-icon>
                </div>
                <div>{{assessmentData?.warningNote}}</div>
            </div>
        </ng-container>

        <div class="footer mt-2">
            <div class="legend"></div>

            <div class="flex justify-end items-center gap-2 mt-3">
                <ng-container *ngFor="let button of assessmentData?.buttonsList">
                    <button mat-button class="flex justify-center items-center" [ngClass]="button.classes" (click)="closePopup(button.response)">{{button.text}}</button>
                </ng-container>
            </div>
        </div>
    </div>
</div>