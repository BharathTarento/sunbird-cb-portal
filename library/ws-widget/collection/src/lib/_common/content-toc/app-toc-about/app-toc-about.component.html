<div class="flex flex-col gap-10 mt-4">
    <div class="earned-certificate-container flex flex-row" *ngIf="false">        
        <div class="ribbon"></div>
        <div class="earned-certificate">Certificate earned</div>
        <div class="earned-certificate-container-background">

        </div>
    </div>

    <ng-container *ngIf="timer.days >= 0">
        <div class="flex flex-col gap-6 batch-timer">
            <div class="flex flex-row">
                <div class="flex-1">
                    <div class="flex underline"></div>
                </div>
                <div class="flex">
                    <div class="timer-label">This batch starts in</div>
                </div>
                <div class="flex-1">
                    <div class="flex underline"></div>
                </div>
    
            </div>

            <div class="flex flex-row gap-4 justify-center">
                <div class="flex flex-row gap-1 items-center">
                    <div class="text-4xl leading-10 counter">{{ timer.days || 0 }}</div>
                    <div class="counter-label">Days</div>
                </div>
                <div class="flex items-center counter-label">
                    :
                </div>
                <div class="flex flex-row gap-1 items-center">
                    <div class="text-4xl leading-10 counter">{{ timer.min === 60 ? timer.hours + 1 : timer.hours }}</div>
                    <div class="counter-label">Hours</div>
                </div>
                <div class="flex items-center counter-label">
                    :
                </div>
                <div class="flex flex-row gap-1 items-center">
                    <div class="text-4xl leading-10 counter">{{ timer.min === 60 ? 00 : timer.min }}</div>
                    <div class="counter-label">Minutes</div>
                </div>
            </div>
        </div>
    </ng-container>

    <div class="flex flex-col" [class.mt60]="sticky">
        <ng-container *ngIf="skeletonLoader">
            <ws-widget-skeleton-loader [width]="'80px'" [height]="'16px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
            <div class="flex flex-col gap-2 mt-4">
                <ws-widget-skeleton-loader [width]="'80%'" [height]="'16px'"
                    [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'95%'" [height]="'16px'"
                    [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'65%'" [height]="'16px'"
                    [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
            </div>
        </ng-container>
        <ng-container *ngIf="!skeletonLoader">
            <ng-container *ngIf="fromViewer">
                <div class="text-xl leading-5 font-bold">{{ handleCapitalize(content?.name) }}
                </div>
                <div class="leading-4">By {{ content?.source }}</div>                
            </ng-container>
            <ng-container *ngIf="fromViewer || isMobile">
                <div class="flex gap-2" [ngClass]="isMobile ? 'horizontal-strip' : 'flex-wrap'">
                            
                    <div class="flex flex-col kpi-values items-center gap-2" *ngIf="content?.duration">
                      <mat-icon class="timer-icon">timer</mat-icon>
                      <div class="text-xs">{{ content?.duration | pipeDurationTransform: 'hms' }}</div>
                    </div>
      
                    <ng-container *ngIf="content?.children?.length">
                      <div class="flex flex-col kpi-values items-center gap-2" *ngIf="tocStructure?.course > 0">
                        <img src="/assets/icons/content/course.svg" width="20px" alt="pdf image" />
                        <div class="text-xs" i18n>{{ tocStructure?.course }} Course(s)</div>
                      </div>
        
                      <div class="flex flex-col kpi-values items-center gap-3" *ngIf="tocStructure?.learningModule > 0">
                        <img src="/assets/icons/content/module.svg" width="24px" alt="module image" />
                        <div class="text-xs" i18n>{{ tocStructure?.learningModule }} Module(s)</div>
                      </div>
        
                      <div class="flex flex-col kpi-values items-center gap-2" *ngIf="tocStructure?.video > 0">
                        <img src="/assets/icons/content/video.svg" width="20px" alt="video image" />
                        <div class="text-xs" i18n>{{ tocStructure?.video }} Video(s)</div>
                      </div>
                      
                      <div class="flex flex-col kpi-values items-center gap-2" *ngIf="tocStructure?.pdf > 0">
                        <img src="/assets/icons/content/pdf.svg" width="20px" alt="pdf image" />
                        <div class="text-xs" i18n>{{ tocStructure?.pdf }} PDF's</div>
                      </div>
        
                      <div class="flex flex-col kpi-values items-center gap-2" *ngIf="tocStructure?.podcast > 0">
                        <img src="/assets/icons/content/audio.svg" width="20px" alt="podcast image" />
                        <div class="text-xs" i18n>{{ tocStructure?.podcast }} Audio(s)</div>
                      </div>
      
                      <div class="flex flex-col kpi-values items-center gap-2" *ngIf="tocStructure?.webPage > 0">
                        <mat-icon>content_copy</mat-icon>
                        <div class="text-xs" i18n>{{ tocStructure?.webPage }} Web Page(s)</div>
                      </div>
      
                      <div class="flex flex-col kpi-values items-center gap-2" *ngIf="tocStructure?.interactivecontent > 0">
                        <img src="/assets/icons/content/link.svg" width="20px" alt="interactive content image" />
                        <div class="text-xs" i18n>{{ tocStructure?.interactivecontent }} Interactive Content(s)</div>
                      </div>
        
                      <div class="flex flex-col kpi-values items-center gap-2" *ngIf="tocStructure?.finalTest > 0">
                        <img src="/assets/icons/content/assessment.svg" width="20px" alt="assessment image" />
                        <div class="text-xs" i18n>{{ tocStructure?.finalTest }} Final assessment(s) </div>
                      </div>
      
                      <div class="flex flex-col kpi-values items-center gap-2" *ngIf="tocStructure?.practiceTest > 0">
                        <img src="/assets/icons/content/assessment.svg" width="20px" alt="practice test image" />
                        <div class="text-xs" i18n>{{ tocStructure?.practiceTest }} Practice test(s) </div>
                      </div>
      
                      <div class="flex flex-col kpi-values items-center gap-2" *ngIf="tocStructure?.other > 0">
                        <img src="/assets/icons/content/course.svg" width="20px" alt="other items image" />
                        <div class="text-xs" i18n>{{ tocStructure?.other }} Other Item(s) </div>
                      </div>
                      
                    </ng-container>
                </div>
            </ng-container>
            <div class="mat-subheading-1 summary">Summary</div>
            <div [ngClass]="{'desc-ellipsis': summary.ellipsis}" #summaryElem>
                {{ handleCapitalize(content?.description) }}
                <span class="ws-mat-default-text font-bold cursor-pointer text-xs" *ngIf="summary.viewLess"
                    (click)="summary.ellipsis = !summary.ellipsis; summary.viewLess = !summary.viewLess">&nbsp;View less</span>
            </div>
            <div class="ws-mat-default-text font-bold cursor-pointer text-xs" *ngIf="summary.ellipsis" (click)="summary.ellipsis = !summary.ellipsis; summary.viewLess = !summary.viewLess">View more</div>
        </ng-container>
    </div>

    <div class="flex flex-col">
        <ng-container *ngIf="skeletonLoader">
            <ws-widget-skeleton-loader [width]="'80px'" [height]="'16px'"
                [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
            <div class="flex flex-col gap-2 mt-4">
                <ws-widget-skeleton-loader [width]="'80%'" [height]="'16px'"
                    [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'95%'" [height]="'16px'"
                    [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'65%'" [height]="'16px'"
                    [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
            </div>
        </ng-container>
        <ng-container *ngIf="!skeletonLoader">
            <div class="mat-subheading-1">Description</div>
            <div class="desc" [ngClass]="{'desc-ellipsis': description.ellipsis}" #descElem>
                <span [innerHTML]="content?.instructions"></span>
                <span class="ws-mat-default-text font-bold cursor-pointer text-xs" *ngIf="description.viewLess"
                    (click)="description.ellipsis = !description.ellipsis; description.viewLess = !description.viewLess">&nbsp;View less</span>
            </div>
            <div class="ws-mat-default-text font-bold cursor-pointer text-xs" *ngIf="description.ellipsis" (click)="description.ellipsis = !description.ellipsis; description.viewLess = !description.viewLess" >View more</div>
        </ng-container>
    </div>

    <ng-container *ngIf="skeletonLoader">
        <div class="flex flex-col gap-3">
            <ws-widget-skeleton-loader [width]="'120px'" [height]="'16px'"
                [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
            <div class="flex flex-row gap-3">
                <ng-container *ngFor="let i of [1, 2]">
                    <ws-widget-skeleton-loader [width]="'120px'" [height]="'32px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                </ng-container>
            </div>
            <div class="flex flex-row gap-4">
                <ws-widget-skeleton-loader [width]="'40%'" [height]="'80px'"
                    [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'40%'" [height]="'80px'"
                    [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
            </div>
        </div>
    </ng-container>

    <ng-container *ngIf="!skeletonLoader">
        <ng-container *ngIf="!strip?.loaderWidgets?.length || !competenciesObject">
            <div class="flex flex-col">
                <div class="mat-subheading-1">Competencies 
                    <span><mat-icon class="cursor-pointer ws-mat-black60-text info-icon mat-icon notranslate material-icons mat-icon-no-color" [matTooltipPosition]="'below'" [matTooltip]="'Competency: Set of demonstrable characteristics and skills that enable and improve the efficiency of performing a job.
                        Behavioural competencies describe the key values and strengths that help an official perform effectively in a range of roles.
                        Domain competencies are defined for a specific MDO (for example, the Ministry of Personnel or the Department of Biotechnology) but that does not mean that others will not need them.
                        Functional competencies are common among many domains, cutting across MDOs, as well as roles and activities.'">info_outline</mat-icon></span>
                </div>
                No competencies found
            </div>
        </ng-container>
        <ng-container *ngIf="strip?.loaderWidgets?.length > 0">
            <div class="flex flex-col gap-3">
                <div class="mat-subheading-1">Competencies
                    <span><mat-icon class="cursor-pointer ws-mat-black60-text info-icon mat-icon notranslate material-icons mat-icon-no-color" [matTooltipPosition]="'below'" [matTooltip]="'Competency: Set of demonstrable characteristics and skills that enable and improve the efficiency of performing a job.
                        Behavioural competencies describe the key values and strengths that help an official perform effectively in a range of roles.
                        Domain competencies are defined for a specific MDO (for example, the Ministry of Personnel or the Department of Biotechnology) but that does not mean that others will not need them.
                        Functional competencies are common among many domains, cutting across MDOs, as well as roles and activities.'">info_outline</mat-icon></span>
                </div>
                <div class="flex flex-row gap-3 sm:gap-4 mb-3">
                    <ng-container *ngFor="let item of competenciesObject" >
                        <div class="themes-button" [ngClass]="{'theme-activated': competencySelected === item.key}" (click)="handleShowCompetencies(item, 'selected')">{{ item.key }}</div>
                    </ng-container>
                </div>
                <ng-container *ngFor="let item of competenciesObject">
                    <div *ngIf="item?.key === competencySelected">
                        <ws-utils-horizontal-scroller-v2 [sliderConfig]="strip.sliderConfig" [loadStatus]="'done'" [stripConfig]="strip.stripConfig">
                            <ng-container *ngFor="let widget of strip?.loaderWidgets; trackBy: tracker">
                                <ng-container [wsResolverWidget]="widget"></ng-container>
                            </ng-container>
                        </ws-utils-horizontal-scroller-v2>
                    </div>
                </ng-container>
            </div>
        </ng-container>
    </ng-container>

    <div class="flex flex-col">
        <ng-container *ngIf="skeletonLoader">
            <ws-widget-skeleton-loader [width]="'48px'" [height]="'16px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
            <div class="flex flex-col gap-2 mt-4">
                <ws-widget-skeleton-loader [width]="'95%'" [height]="'16px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                <ws-widget-skeleton-loader [width]="'100%'" [height]="'16px'" [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
            </div>
        </ng-container>
        <ng-container *ngIf="!skeletonLoader">
            <div class="mat-subheading-1">Tags</div>
            <div class="flex flex-wrap gap-2" *ngIf="content?.keywords?.length">
                <ng-container *ngFor="let tag of content?.keywords; let i = index">
                    <div class="text-xs" [ngClass]="{'hidden': (i > 8 && !viewMoreTags)}">{{ tag }}</div>
                    <div class="flex items-center" [ngClass]="{'hidden': (i > 8 && !viewMoreTags)}" *ngIf="content?.keywords?.length > (i + 1)">
                        <span class="period"></span>
                    </div>
                </ng-container>
                <div class="flex items-center ws-mat-default-text underline cursor-pointer text-xs" *ngIf="content?.keywords?.length > 8 && !viewMoreTags" (click)="viewMoreTags = !viewMoreTags">View more</div>
                <div class="flex items-center ws-mat-default-text underline cursor-pointer text-xs" *ngIf="viewMoreTags"
                 (click)="viewMoreTags = !viewMoreTags">View less</div>
            </div>
            <div class="flex flex-wrap gap-2" *ngIf="!content?.keywords?.length">
                No tags found
            </div>
        </ng-container>
    </div>

    <ng-container *ngIf="skeletonLoader">
        <ws-widget-skeleton-loader [width]="'100%'" [height]="'72px'"
            [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
    </ng-container>
    <ng-container *ngIf="!skeletonLoader">
        <div class="flex flex-col sm:flex-row p-6 gap-6 items-center discussion-div">
            <div class="flex-1">
                <div class="flex flex-col sm:flex-row gap-5 items-center">
                    <mat-icon>forum</mat-icon>
                    <div class="text-center sm:text-left">Do you have any questions, suggestions or, ideas in your mind? Post it.</div>
                </div>
            </div>
            <div class="flex-none">
                <button [routerLink]="['/app/discussion-forum']" [queryParams]="{page: 'home'}" class="action-button">Start discussion</button>
            </div>
        </div>
    </ng-container>

    <div class="flex flex-col gap-3">
        <ng-container *ngIf="skeletonLoader">
            <div class="flex flex-col gap-6">
                <div class="flex flex-col gap-4" *ngFor="let i of [1, 2]">
                    <ws-widget-skeleton-loader [width]="'72px'" [height]="'20px'"
                        [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
            
                    <div class="flex flex-row items-center gap-3">
                        <ws-widget-skeleton-loader [width]="'36px'" [height]="'36px'"
                            [bindingClass]="'rounded-full'"></ws-widget-skeleton-loader>
                        <div class="flex flex-col gap-2">
                            <ws-widget-skeleton-loader [width]="'124px'" [height]="'20px'"
                                [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                            <ws-widget-skeleton-loader [width]="'124px'" [height]="'12px'"
                                [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
                        </div>
                    </div>
                </div>
            </div>
        </ng-container>

        <ng-container *ngIf="!skeletonLoader">
            <div class="text-base font-bold">Authors and curators</div>
            <div class="flex flex-col gap-4">
                <div class="flex flex-row gap-4 items-center" *ngFor="let author of handleParseJsonData(content?.creatorDetails)">
                    <div class="flex items-center justify-center">
                        <ws-widget-avatar-photo [randomColor]="true" [datalen]="1" [size]="'round-m'"
                            [photoUrl]="author.photo || ''" [name]="author.name">
                        </ws-widget-avatar-photo>
                    </div>
                    <div class="flex flex-col gap-1 justify-center">
                        <div class="font-bold">{{ author?.name }}</div>
                        <div class="text-xs leading-3">Author</div>
                    </div>
                </div>
    
                <div class="flex flex-row gap-4" *ngFor="let creator of handleParseJsonData(content?.creatorContacts)">
                    <div class="flex items-center justify-center">
                        <ws-widget-avatar-photo [randomColor]="true" [datalen]="1" [size]="'round-m'" [photoUrl]="creator.photo || ''"
                            [name]="creator.name">
                        </ws-widget-avatar-photo>
                    </div>
                    <div class="flex flex-col gap-1 justify-center">
                        <div class="font-bold">{{ handleCapitalize(creator?.name) }}</div>
                        <div class="text-xs leading-3">Curator</div>
                    </div>
                </div>
            </div>
        </ng-container>
    </div>

    <ng-container *ngIf="skeletonLoader">
        <ws-widget-skeleton-loader [width]="'100%'" [height]="'400px'"
            [bindingClass]="'rounded'"></ws-widget-skeleton-loader>
    </ng-container>
    <ng-container *ngIf="!skeletonLoader">
        <div class="flex flex-col ratings-div gap-10" id="ratingsDiv">
            <ws-widget-rating-summary [ratingSummary]="ratingSummaryProcessed" ></ws-widget-rating-summary>
    
            <div class="flex flex-col gap-3">
                <div class="flex flex-row gap-4">
                    <div class="flex-1 mat-subheading-1" id="reviewContainer">Top reviews</div>
                    <ng-container *ngIf="reviews && reviews?.length">
                        <div class="ws-mat-default-text cursor-pointer" (click)="handleOpenReviewModal()" >Show all</div>
                    </ng-container>
                </div>
                <ng-container *ngIf="reviews && reviews?.length">
                    <div class="flex flex-wrap gap-5">
                        <div class="comment-div" *ngFor="let eachReview of reviews; let i = index">
                            <div class="p-4 flex flex-col gap-6">
                                <div class="flex flex-row gap-4">
                                    <div class="flex-1">{{ handleCapitalize(eachReview?.review) }}</div>
                                    <div class="flex flex-row gap-2 rating-start-value">
                                        <mat-icon>star</mat-icon>
                                        <div>{{ eachReview?.rating }}</div>
                                    </div>
                                </div>
                                <div class="flex flex-row gap-2 items-center">
                                    <ws-widget-avatar-photo [randomColor]="true" [datalen]="1" [size]="'round-m'" [photoUrl]="eachReview?.photo || ''" [name]="eachReview?.firstName"></ws-widget-avatar-photo>
                                    <div>{{ handleCapitalize(eachReview?.firstName) }}</div>
                                    <div class="flex items-center">
                                        <span class="period"></span>
                                    </div>
                                    <div>{{ eachReview?.updatedon | pipeRelativeTime }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>
                <div *ngIf="!reviews || !reviews?.length">
                    <div class="flex flex-col text-center items-center justify-center bg-white p-4 rounded-md">
                        <div class="font-base font-bold">No reviews found!</div>
                    </div>
                </div>
            </div>
        </div>
    </ng-container>
</div>