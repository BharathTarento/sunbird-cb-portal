<div>
    <div class="triangle-left"></div>
    <div class="karmasahayogi-icon"><img alt="chatbot-icon" src="/assets/icons/KarmaSahayogi.svg"></div>
    <ng-container>
        <section class="w-full flex align-center justify-between ">
            <div class="mb-2">
                <h2 class="mat-headline margin-remove-bottom ws-mat-black-text">Share with Karmayogis</h2>
            </div>
            <button mat-icon-button aria-label="close dialog" mat-dialog-close tabindex="-1">
                <mat-icon>close</mat-icon>
            </button>

        </section>
        <form [formGroup]="shareForm">
            <div class="mat-body-2">
                <!-- <div class="mb-5">
                    <mat-form-field appearance="outline" class="w-full">
                        <textarea id="review" matInput formControlName="review" matInput [matTextareaAutosize] [matAutosizeMaxRows]="10"
                        [matAutosizeMinRows]="3" placeholder="To: Add an email" i18n-placeholder #review i18n-aria-label
                            aria-label="Review textarea input" class="mat-body-2"></textarea>
                        <mat-hint align="start">Note: Emails will be sent only to registered karmayogis.</mat-hint>
                        <mat-hint align="end">{{ review.value.length }} /30 characters</mat-hint>
                    </mat-form-field>
                </div> -->

                <div class="md-5">
                    <mat-form-field appearance="outline" class="w-full">
                        <mat-chip-list #chipList aria-label="Fruit selection" appearance="outline">
                            <mat-chip
                                *ngFor="let user of users"
                                [selectable]="selectable"
                                [removable]="removable"
                                (removed)="remove(user)">
                                {{user}}
                                <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                            </mat-chip>
                            <input
                                tabindex="-1"
                                placeholder="{{users.length === 0 ? placehoderText : ''}}"
                                #userInput
                                formControlName="review"
                                [formControl]="userCtrl"
                                [matAutocomplete]="auto"
                                [matChipInputFor]="chipList"
                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                [matChipInputAddOnBlur]="addOnBlur"
                                (matChipInputTokenEnd)="add($event)">
                        </mat-chip-list>
                        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                            <mat-option *ngFor="let user of filteredUsers | async" [value]="user.name">
                                <div class="flex">
                                    <div class="iconDiv">
                                        <span class="iconText">{{user.iconText.substring(0,2)}}</span>
                                    </div>
                                    <div>
                                        <div>{{user.name}}</div>
                                        <div class="emailText">{{user.maskedEmail}}</div>
                                    </div>
                                </div>
                            </mat-option>
                        </mat-autocomplete>
                        <mat-error *ngIf="users.length > 3"> You have exceeded 30 emails.</mat-error>
                        <mat-hint align="start">Note: Emails will be sent only to registered karmayogis.</mat-hint>
                        <mat-hint align="end">{{ users.length }} /30 characters</mat-hint>
                    </mat-form-field>
                </div>
                <div class="flex mt-5">
                    <div class="flex flex-1 flex-end">
                        <button mat-stroked-button class="flex-auto-display copy-link-btn" tabindex="-1">
                            Copy link &nbsp;&nbsp;<mat-icon >link</mat-icon>
                        </button>
                        <button mat-stroked-button type="submit"
                            class="text-white ws-mat-primary-background flex-auto-display send-btn"
                            [disabled]="users.length === 0 || users.length > 3" (click)="submitSharing()"
                            >
                            Send<mat-icon >play_arrow</mat-icon>
                        </button>
                    </div>
                </div>

            </div>
        </form>
    </ng-container>
</div>
